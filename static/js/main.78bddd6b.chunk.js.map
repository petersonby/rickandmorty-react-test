{"version":3,"sources":["redux/types.js","redux/actions.js","components/SingleCharacter.js","components/ListOfCharacters.js","App.js","redux/rootReducer.js","redux/sagas.js","app/store.js","index.js"],"names":["FETCH_CHARACTERS","FETCH_SINGLE_CHARACTER","REQUEST_CHARACTERS","REQUEST_SINGLE_CHARACTER","PAGES_NUM","INCREMENT_NUM","requestCharacters","type","setPagesNum","pagesNum","payload","SingleCharacter","match","dispatch","useDispatch","character","useSelector","state","singleCharacter","useEffect","id","params","to","src","image","name","status","species","gender","created","episode","map","i","href","StyledList","styled","ul","ListOfCharacters","loading","characters","useState","loader","setLoader","pageLoaderY","useRef","observer","IntersectionObserver","y","boundingClientRect","current","root","rootMargin","threshold","currentLoader","currentObserver","observe","unobserve","length","style","textAlign","ref","height","App","className","path","exact","component","initialState","page","sagaWatcher","sagaWorker","sagaSingleWorker","takeEvery","takeLatest","getPage","getPagesNum","select","put","call","fetchPosts","response","info","pages","results","a","fetch","json","fetchPost","saga","createSagaMiddleware","createStore","action","compose","applyMiddleware","window","__REDUX_DEVTOOLS_EXTENSION__","run","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"yOAAaA,EAAmB,mBACnBC,EAAyB,yBACzBC,EAAqB,qBACrBC,EAA2B,2BAG3BC,EAAY,YACZC,EAAgB,gBCOtB,SAASC,IACd,MAAO,CACLC,KAAML,GA+BH,SAASM,EAAYC,GAC1B,MAAO,CACLF,KAAMH,EACNM,QAASD,G,WC7CE,SAASE,EAAT,GAAqC,IAAVC,EAAS,EAATA,MAClCC,EAAWC,cACXC,EAAYC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,mBAAiB,GAM9D,OAJAC,qBAAU,WDwBL,IAAgCC,ECvBnCP,GDuBmCO,ECvBHR,EAAMS,OAAOD,GDwBxC,CACLb,KAAMJ,EACNO,QAASU,OCzBT,IAEEL,EAKF,gCACE,8BAAK,cAAC,IAAD,CAAMO,GAAG,IAAT,4BAEL,qBAAKC,IAAKR,EAAUS,QACpB,6BAAKT,EAAUU,OACf,yCAAYV,EAAUW,UACtB,0CAAaX,EAAUY,WACvB,yCAAYZ,EAAUa,UACtB,yCAAYb,EAAUc,WAEtB,iDACA,6BACGd,EAAUe,QAAQC,KAAI,SAACD,EAASE,GAAV,OAAiB,6BAAY,mBAAGC,KAAMH,EAAT,SAAmBA,KAAtBE,WAhB9C,0C,sBCRLE,E,MAAaC,EAAOC,GAAV,2UAsBD,SAASC,IACtB,IAAMxB,EAAWC,cACXwB,EAAUtB,aAAY,SAAAC,GAAK,OAAIA,EAAMqB,WACrCC,EAAavB,aAAY,SAAAC,GAAK,OAAIA,EAAMsB,cAHL,EAKbC,mBAAS,MALI,mBAKlCC,EALkC,KAK1BC,EAL0B,KAMnCC,EAAcC,iBAAO,GAkBrBC,EAAWD,iBAAO,IAAIE,sBAVL,SAAC,GAAa,IAC7BC,EAD4B,oBAClBC,mBAAmBD,EAE/BJ,EAAYM,QAAUF,GACxBlC,EAASP,KAGXqC,EAAYM,QAAUF,IAbR,CACdG,KAAM,KACNC,WAAY,MACZC,UAAW,KAqCb,OAnBAjC,qBAAU,WACRN,EAASP,OACT,IAEFa,qBAAU,WACR,IAAMkC,EAAgBZ,EAChBa,EAAkBT,EAASI,QAMjC,OAJGI,GACDC,EAAgBC,QAAQF,GAGnB,WACDA,GACFC,EAAgBE,UAAUH,MAG7B,CAACZ,IAEAF,EAAWkB,OAKb,qCACE,cAACvB,EAAD,UACGK,EAAWR,KAAI,SAAAhB,GAAS,OACvB,6BACE,eAAC,IAAD,CAAMO,GAAE,qBAAgBP,EAAUK,IAAlC,UAAyCL,EAAUU,KAAnD,IAA0DV,EAAUK,OAD7DL,EAAUK,SAMtBkB,GAAW,mBAAGoB,MAAO,CAACC,UAAW,UAAtB,wBAEZ,qBAAKC,IAAKlB,EAAWgB,MAAO,CAACG,OAAQ,cAfhC,yCC9DIC,MAVf,WAEE,OACE,sBAAKC,UAAU,MAAf,UACE,cAAC,IAAD,CAAOC,KAAK,IAAIC,OAAK,EAACC,UAAW7B,IACjC,cAAC,IAAD,CAAO2B,KAAK,iBAAiBE,UAAWvD,Q,gCCRxCwD,EAAe,CACnB5B,WAAY,GACZrB,gBAAiB,GACjBkD,KAAM,EACN9B,SAAS,EACT7B,SAAU,M,2CCHK4D,G,WAQPC,G,WAqCAC,GA7CH,SAAUF,IAAV,iEACL,OADK,SACCG,YAAUtE,EAAoBoE,GAD/B,OAEL,OAFK,SAECG,YAAWtE,EAA0BoE,GAFtC,uCAKP,IAAMG,EAAU,SAACzD,GAAD,OAAWA,EAAMmD,MAC3BO,EAAc,SAAC1D,GAAD,OAAWA,EAAMR,UAErC,SAAU6D,IAAV,2EACa,OADb,SACmBM,YAAOF,GAD1B,OAEiB,OADXN,EADN,gBAEuBQ,YAAOD,GAF9B,aAEMlE,EAFN,SAImBA,EAAW2D,GAJ9B,0CAKW,GALX,OASI,OATJ,mBASUS,YLlBD,CACLtE,KDAuB,gBMQ3B,QAWqB,OAXrB,UAW2BuE,aAAK,kBAAMC,EAAWX,MAXjD,WAWUY,EAXV,OAaQvE,EAbR,iBAcM,OAdN,UAcYoE,YAAIrE,EAAYwE,EAASC,KAAKC,QAd1C,QAiBI,OAjBJ,UAiBUL,aLHsBtC,EKGFyC,EAASG,QLF9B,CACL5E,KAAMP,EACNU,QAAS6B,KKjBb,QAmBI,OAnBJ,UAmBUsC,YLVD,CACLtE,KAAMF,IKVV,QAqBI,OArBJ,UAqBUwE,YLxBD,CACLtE,KDLuB,gBMO3B,gCAuBI,OAvBJ,oCAuBUsE,YL1BD,CACLtE,KDLuB,gBMO3B,kCLcO,IAAyBgC,IKdhC,iB,SA2BewC,E,8EAAf,WAA0BX,GAA1B,iBAAAgB,EAAA,sEACyBC,MAAM,mDAAD,OACyBjB,IAFvD,cACQY,EADR,gBAKmBA,EAASM,OAL5B,cAKMA,EALN,yBAOSA,GAPT,4C,sBAUA,SAAUf,EAAV,4EAEqB,OAFO7D,EAA5B,EAA4BA,QAA5B,kBAE2BoE,aAAK,kBAAMS,EAAU7E,MAFhD,OAGI,OADMsE,EAFV,gBAGUH,YLXD,CACLtE,KAAMN,EACNS,QKS+BsE,IAHnC,4G,SASeO,E,8EAAf,WAAyBnE,GAAzB,iBAAAgE,EAAA,sEACyBC,MAAM,6CAAD,OACmBjE,IAFjD,cACQ4D,EADR,gBAKmBA,EAASM,OAL5B,cAKMA,EALN,yBAOSA,GAPT,4C,sBCrDA,IAAME,EAAOC,cAEEC,eFGY,WAAmC,IAAlCzE,EAAiC,uDAAzBkD,EAAcwB,EAAW,uCAC3D,OAAQA,EAAOpF,MACb,KAAKP,EACH,OAAO,2BACFiB,GADL,IAEEsB,WAAW,GAAD,mBAAMtB,EAAMsB,YAAZ,YAA2BoD,EAAOjF,YAGhD,KAAKT,EACH,OAAO,2BACFgB,GADL,IAEEC,gBAAiB,CAACyE,EAAOjF,WAG7B,KAAKN,EACH,OAAO,2BACFa,GADL,IAEER,SAAUkF,EAAOjF,UAGrB,KAAKL,EACH,OAAO,2BACFY,GADL,IAEEmD,KAAMnD,EAAMmD,KAAO,IAGvB,QACE,OAAOnD,KE9B2B2E,YACtCC,YACEL,GAEFM,OAAOC,8BAAgCD,OAAOC,iCAGhDP,EAAKQ,IAAI3B,GCNT4B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAUC,MAAOA,EAAjB,SACE,cAAC,EAAD,UAINC,SAASC,eAAe,W","file":"static/js/main.78bddd6b.chunk.js","sourcesContent":["export const FETCH_CHARACTERS = 'FETCH_CHARACTERS'\nexport const FETCH_SINGLE_CHARACTER = 'FETCH_SINGLE_CHARACTER'\nexport const REQUEST_CHARACTERS = 'REQUEST_CHARACTERS'\nexport const REQUEST_SINGLE_CHARACTER = 'REQUEST_SINGLE_CHARACTER'\nexport const SHOW_LOADER = 'SHOW_LOADER'\nexport const HIDE_LOADER = 'HIDE_LOADER'\nexport const PAGES_NUM = 'PAGES_NUM'\nexport const INCREMENT_NUM = 'INCREMENT_NUM'","import { HIDE_LOADER, SHOW_LOADER, FETCH_CHARACTERS, REQUEST_CHARACTERS, PAGES_NUM, INCREMENT_NUM, FETCH_SINGLE_CHARACTER, REQUEST_SINGLE_CHARACTER } from \"./types\";\n\nexport function showLoader() {\n  return {\n    type: SHOW_LOADER\n  }\n}\n\nexport function hideLoader() {\n  return {\n    type: HIDE_LOADER\n  }\n}\n\nexport function requestCharacters() {\n  return {\n    type: REQUEST_CHARACTERS\n  }\n}\n\nexport function incrementPage() {\n  return {\n    type: INCREMENT_NUM\n  }\n}\n\nexport function fetchCharacters(characters) {\n  return {\n    type: FETCH_CHARACTERS,\n    payload: characters\n  }\n}\n\nexport function requestSingleCharacter(id) {\n  return {\n    type: REQUEST_SINGLE_CHARACTER,\n    payload: id\n  }\n}\n\nexport function fetchSingleCharacter(character) {\n  return {\n    type: FETCH_SINGLE_CHARACTER,\n    payload: character\n  }\n}\n\nexport function setPagesNum(pagesNum) {\n  return {\n    type: PAGES_NUM,\n    payload: pagesNum\n  }\n}","import React, {useEffect} from 'react';\nimport { Link } from \"react-router-dom\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { requestSingleCharacter } from '../redux/actions';\n\nexport default function SingleCharacter({ match }) {\n  const dispatch = useDispatch();\n  const character = useSelector(state => state.singleCharacter)[0];\n\n  useEffect(() => {\n    dispatch(requestSingleCharacter(match.params.id));\n  },[]);\n\n  if(!character) {\n    return <p>Not Found</p>\n  }\n\n  return (\n    <div>\n      <div><Link to=\"/\">Back to List</Link></div>\n\n      <img src={character.image} />\n      <h1>{character.name}</h1>\n      <p>Status: {character.status}</p>\n      <p>Species: {character.species}</p>\n      <p>Gender: {character.gender}</p>\n      <p>created {character.created}</p>\n\n      <div>Episodes List:</div>\n      <ul>\n        {character.episode.map((episode, i) => (<li key={i}><a href={episode}>{episode}</a></li>))}\n      </ul>\n    </div>\n  );\n}","import React, {useState, useEffect, useRef} from 'react';\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { requestCharacters } from '../redux/actions';\n\nconst StyledList = styled.ul`\n  list-style: none;\n  width: 200px;\n  margin: 0 auto;\n\n  li + li {\n    margin-top: 30px;\n  }\n\n  a {\n    font-size: 18px;\n    text-align: center;\n    text-decoration: none;\n    color: #000;\n\n    border: 10px;\n    background-color: #eee;\n    padding: 20px 10px;\n    display: block;\n  }\n`;\n\nexport default function ListOfCharacters() {\n  const dispatch = useDispatch();\n  const loading = useSelector(state => state.loading);\n  const characters = useSelector(state => state.characters);\n\n  const [loader, setLoader] = useState(null);\n  const pageLoaderY = useRef(0);\n  \n  const options = {\n    root: null,\n    rootMargin: \"0px\",\n    threshold: 1.0\n  };\n  \n  const handleObserver = ([entry]) => {\n    const y = entry.boundingClientRect.y;\n    \n    if (pageLoaderY.current > y) {\n      dispatch(requestCharacters());\n    }\n    \n    pageLoaderY.current = y;\n  }\n  \n  const observer = useRef(new IntersectionObserver (\n    handleObserver,\n    options\n  ));\n    \n  useEffect(() => {\n    dispatch(requestCharacters());\n  },[]);\n  \n  useEffect(() => {\n    const currentLoader = loader;\n    const currentObserver = observer.current;\n    \n    if(currentLoader) {\n      currentObserver.observe(currentLoader); \n    }\n    \n    return () => {\n      if (currentLoader) {\n        currentObserver.unobserve(currentLoader);\n      }\n    };\n  }, [loader]);\n\n  if(!characters.length) {\n    return <p>no posts</p>\n  }\n\n  return (\n    <>\n      <StyledList>\n        {characters.map(character => (\n          <li key={character.id}>\n            <Link to={`/character/${character.id}`}>{character.name} {character.id}</Link>\n          </li>\n        ))}\n      </StyledList>\n\n      {loading && <p style={{textAlign: \"center\"}}>Loading...</p>}\n\n      <div ref={setLoader} style={{height: \"100px\"}} />\n    </>\n  );\n}","import React from 'react';\r\nimport { Route } from \"react-router-dom\";\r\nimport SingleCharacter from './components/SingleCharacter';\r\nimport ListOfCharacters from './components/ListOfCharacters';\r\n\r\nfunction App() {\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Route path=\"/\" exact component={ListOfCharacters} />\r\n      <Route path=\"/character/:id\" component={SingleCharacter} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { FETCH_CHARACTERS, FETCH_SINGLE_CHARACTER, PAGES_NUM, INCREMENT_NUM } from './types';\n\nconst initialState = {\n  characters: [],\n  singleCharacter: [],\n  page: 1,\n  loading: false,\n  pagesNum: null\n};\n\nexport const rootReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FETCH_CHARACTERS:\n      return {\n        ...state, \n        characters: [...state.characters, ...action.payload]\n      };\n\n    case FETCH_SINGLE_CHARACTER:\n      return {\n        ...state, \n        singleCharacter: [action.payload]\n      };\n\n    case PAGES_NUM:\n      return {\n        ...state, \n        pagesNum: action.payload\n      };\n\n    case INCREMENT_NUM:\n      return {\n        ...state, \n        page: state.page + 1\n      };\n  \n    default:\n      return state;\n  }\n}","import {call, put, takeEvery, select, takeLatest} from 'redux-saga/effects';\nimport { hideLoader, showLoader, fetchCharacters, fetchSingleCharacter, setPagesNum, incrementPage } from './actions';\nimport { REQUEST_CHARACTERS, REQUEST_SINGLE_CHARACTER } from './types';\n\nexport function* sagaWatcher() {\n  yield takeEvery(REQUEST_CHARACTERS, sagaWorker);\n  yield takeLatest(REQUEST_SINGLE_CHARACTER, sagaSingleWorker);\n}\n\nconst getPage = (state) => state.page;\nconst getPagesNum = (state) => state.pagesNum;\n\nfunction* sagaWorker() {\n  let page = yield select(getPage);\n  let pagesNum = yield select(getPagesNum);\n\n  if(!!pagesNum && pagesNum < page) {\n    return true;\n  }\n\n  try {\n    yield put(showLoader());\n\n    const response = yield call(() => fetchPosts(page));\n  \n    if(!pagesNum) {\n      yield put(setPagesNum(response.info.pages));\n    }\n\n    yield put(fetchCharacters(response.results));\n\n    yield put(incrementPage());\n  \n    yield put(hideLoader());\n  } catch (error) {\n    yield put(hideLoader());\n  }\n}\n\nasync function fetchPosts(page) {\n  const response = await fetch(\n    `https://rickandmortyapi.com/api/character/?page=${page}`\n  );\n\n  let json = await response.json();\n\n  return json;\n}\n\nfunction* sagaSingleWorker({payload}) {\n  try {\n    const response = yield call(() => fetchPost(payload));\n    yield put(fetchSingleCharacter(response));\n\n  } catch (error) {\n  }\n}\n\nasync function fetchPost(id) {\n  const response = await fetch(\n    `https://rickandmortyapi.com/api/character/${id}`\n  );\n\n  let json = await response.json();\n\n  return json;\n}","import { createStore, compose, applyMiddleware } from '@reduxjs/toolkit';\r\nimport createSagaMiddleware from 'redux-saga';\r\nimport { rootReducer } from '../redux/rootReducer';\r\nimport { sagaWatcher } from '../redux/sagas';\r\n\r\nconst saga = createSagaMiddleware();\r\n\r\nexport default createStore(rootReducer, compose(\r\n  applyMiddleware(\r\n    saga\r\n  ),\r\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\r\n));\r\n\r\nsaga.run(sagaWatcher);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport store from './app/store';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}